<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="renderer" content="webkit" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes"
    />

    <meta name="apple-mobile-web-app-capable" content="yes" />

    <title>登录</title>

    <link
      rel="stylesheet"
      href="/cas/plugins/bootstrap-3.3.7-dist/css/bootstrap.min.css"
    />

    <link rel="stylesheet" href="/cas/css/style.css" />

    <!--[if lt IE 9]>
      <style>
        .col-sm-6.col-xs-12 {
          width: 50%;

          float: left;
        }
      </style>
    <![endif]-->

    <style>
      .sj {
        display: none;
      }

      #tipMsg > h6,
      #_tipMsg_ > h6 {
        font-size: 15px;

        text-align: center;
      }

      .T-getPwdCode {
        display: inline-block;

        position: absolute;

        right: 16px;

        top: 2px;

        cursor: pointer;
      }

      .submitBtn {
        margin-top: -20px;
      }

      .getstunumbpc {
        border: 1px solid #ccc;

        position: absolute;

        top: 20%;

        right: 3%;

        font-size: 18px;

        width: 29px;

        height: 28px;

        text-align: center;

        border-radius: 50%;

        color: #ccc;

        cursor: pointer;
      }

      .getstunumbphone {
        border: 1px solid #ccc;

        position: absolute;

        top: 20%;

        right: 3%;

        font-size: 18px;

        width: 29px;

        height: 28px;

        text-align: center;

        border-radius: 50%;

        color: #ccc;

        cursor: pointer;
      }

      .error_phone {
        color: red !important;

        text-decoration: underline;

        font-size: 14px;
      }

      @media (min-width: 1031px) and (max-width: 1500px) {
        .form-control {
          height: 34px;

          font-size: 14px;
        }

        .forget_div {
          margin-bottom: 0px;
        }

        .login_btn {
          height: 34px;

          font-size: 14px;
        }

        .form_bg {
          height: 450px;
        }

        #carousel_wx {
          z-index: 99999;

          margin-top: 80px;
        }

        .add_action span {
          position: absolute;

          left: 14px;

          top: 6px;

          display: inline-block;

          width: 14px;

          height: 24px;

          line-height: 20px;
        }

        .getstunumbpc {
          top: 10%;
        }

        .main {
          width: 840px;

          text-align: center;

          margin: auto;

          margin-top: 20px !important;
        }

        .qrcode_group {
          color: white;

          font-size: 16px;

          margin-top: 15px;
        }

        .form-group {
          margin-bottom: 15px;
        }
      }

      @media (max-width: 1030px) {
        body {
          background: white;
        }

        .main {
          width: 100%;
        }

        #sj {
          display: block;
        }

        #pc {
          display: none;
        }

        .phone_logo {
          display: block;

          width: 80%;

          margin-left: 10%;

          margin-top: 50px;
        }

        .phone_title {
          text-align: center;

          color: #3360af;

          font-size: 16px;

          margin-top: 50px;
        }

        .sj form {
          width: 90%;

          margin-left: 5%;

          margin-top: 30px;
        }

        .sj form input,
        .sj form a {
          border-radius: 20px;
        }

        .block_btn,
        .block_btn:hover,
        .block_btn:active,
        .block_btn:focus {
          background-color: white;

          color: #3e79b6 !important;
        }

        .sj form .form-group:last-child {
          margin-top: 140px;
        }

        .phone_login {
          display: none;
        }

        .phone_login .T-getCode {
          background-color: white;

          color: #ec0000;

          left: 74% !important;

          position: absolute;

          top: 13px;
        }

        .getstunumb {
          border: 1px solid #ccc;

          position: absolute;

          top: 18%;

          right: 4%;

          font-size: 20px;

          width: 29px;

          text-align: center;

          border-radius: 50%;

          color: #ccc;
        }
      }
    </style>
  </head>

  <body>
    <div class="container-fluid" id="pc">
      <div class="row logo_div">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <img src="/cas/images/new/logo.png" alt="" />
        </div>
      </div>

      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div class="main">
            <div class="row phone_logo">
              <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">&nbsp;</div>

              <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8 no-padding">
                <div class="text-left">
                  <img
                    src="/cas/images/rzzx/phoneLogo.png"
                    width="100%"
                    alt=""
                  />
                </div>

                <div class="text-right tyrz">
                  <img src="/cas/images/rzzx/rz.png" width="50%" alt="" />
                </div>
              </div>
            </div>

            <div class="pc">
              <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
                  <div class="row">
                    <div
                      class="col-lg-5 col-md-5 col-sm-5 col-xs-5 no-padding"
                      id="carousel_wx"
                    >
                      <div class="item">
                        <p class="item_title">温馨提示</p>

                        <p class="attention text-left">
                          教职工为本人6位数字工号，学生为本人<a
                            href="javascript:void(0);"
                            title="获取学号"
                            style="text-decoration: underline"
                            onclick="getsutnumber()"
                            >学号>></a
                          >，初次登录请通过短信验证码登录获取本人密码，
                          登录后请尽快修改初始密码。
                        </p>

                        <p class="attention text-left" style="margin-top: 40px">
                          技术支持电话：87991220（71220）
                        </p>

                        <p class="attention text-left">
                          技术支持邮箱：zhxy@yzu.edu.cn
                        </p>
                      </div>
                    </div>

                    <div
                      class="col-lg-7 col-md-7 col-sm-7 col-xs-7 no-padding"
                      style="z-index: 9999"
                    >
                      <div
                        class="col-lg-9 col-md-9 col-sm-9 col-xs-9 text-left tab"
                      >
                        <div class="col-sm-6 account login_active">
                          账号登录
                        </div>

                        <div class="col-sm-6 phone">短信验证码登录</div>
                      </div>

                      <form
                        id="loginForm"
                        class="form-horizontal col-lg-9 col-md-9 col-sm-9 col-xs-9 account_div"
                        action="/cas/login;jsessionid=98B7CB8D1FB84AA783B6015B956F5D44-n1?service=http%3A%2F%2Fmy.yzu.edu.cn%2Fportal_main%2FtoPortalPage"
                        method="post"
                      >
                        <input
                          type="hidden"
                          name="lt"
                          value="LT-229275-35kSOVylDRokePde2ajGtzIN3uU9lN-https://uaaap.yzu.edu.cn/cas"
                        />

                        <input type="hidden" name="execution" value="e1s1" />

                        <input type="hidden" name="_eventId" value="submit" />

                        <input
                          type="hidden"
                          name="isQrSubmit"
                          value="false"
                          id="isQrSubmit"
                        />

                        <input
                          type="hidden"
                          name="qrValue"
                          value=""
                          id="qrValue"
                        />

                        <input
                          type="hidden"
                          name="isMobileLogin"
                          value="false"
                          id="isMobileLogin"
                        />

                        <div class="form-group">
                          <div class="add_action">
                            <input
                              id="username"
                              name="username"
                              class="form-control"
                              tabindex="1"
                              onkeydown="javascript: if (event.keyCode==13) _systemLogin();"
                              placeholder="教职工号/学生学号"
                              accesskey="n"
                              type="text"
                              value=""
                              size="25"
                              autocomplete="off"
                            />

                            <span
                              ><img
                                src="/cas/images/new/icon_account.png"
                                alt=""
                            /></span>

                            <p
                              class="getstunumbpc"
                              title="教职工为本人6位数字工号，学生为本人学号，新生点击？获取学号"
                              href="javascript:void(0);"
                              onclick="getsutnumber()"
                            >
                              ?
                            </p>
                          </div>
                        </div>

                        <div class="form-group">
                          <div class="add_action">
                            <input
                              id="password"
                              name="password"
                              class="form-control"
                              tabindex="2"
                              onkeydown="javascript: if (event.keyCode==13) _systemLogin();"
                              placeholder="密码"
                              type="password"
                              value=""
                              autocomplete="off"
                            />

                            <span
                              ><img
                                src="/cas/images/new/icon _passdword.png"
                                alt=""
                            /></span>
                          </div>
                        </div>

                        <div
                          class="form-group"
                          id="validatorCode_div"
                          style="display: none"
                        >
                          <input
                            id="authCode"
                            name="authCode"
                            class="form-control"
                            tabindex="3"
                            onkeydown="javascript: if (event.keyCode==13) _systemLogin();"
                            placeholder="验证码"
                            type="text"
                            value=""
                            size="25"
                            autocomplete="off"
                          />

                          <span class="T-getPwdCode">
                            <img
                              src=""
                              title="点击刷新验证码"
                              id="validatorCodeOfLogin"
                              onclick="changeValidatorCode();"
                            />
                          </span>
                        </div>

                        <div class="form-group forget_div">
                          <div class="col-md-6 text-left">
                            <input
                              type="checkbox"
                              style="vertical-align: -2.2px; margin-right: 2px"
                            />记住密码
                          </div>

                          <div class="col-md-6 text-right">
                            <a
                              href="https://uaaap.yzu.edu.cn:443/mng/forgetPWD.jsp?originalUrl=aHR0cHM6Ly91YWFhcC55enUuZWR1LmNuOjQ0My9jYXMvbG9naW4/c2VydmljZT1odHRwJTNBJTJGJTJGbXkueXp1LmVkdS5jbiUyRnBvcnRhbF9tYWluJTJGdG9Qb3J0YWxQYWdl"
                              style="color: #666; margin-right: 45px"
                              ><span>忘记密码</span></a
                            >
                          </div>
                        </div>

                        <div class="form-group submitBtn">
                          <span id="tipMsg">
                            <h6></h6>
                          </span>

                          <input
                            class="login_btn submit"
                            tabindex="4"
                            type="button"
                            onclick="_systemLogin();"
                            value="登录"
                          />
                        </div>

                        <div class="form-group qrcode_group wechat">
                          <span class="line">&nbsp;</span> 第三方登录
                          <span class="line">&nbsp;</span>

                          <div class="text-center">
                            <a
                              href="https://open.work.weixin.qq.com/wwopen/sso/qrConnect?appid=wwc576ff979f9e4e54&agentid=1000002&redirect_uri=http%3A%2F%2Fuaaap.yzu.edu.cn%2Fcas%2Flogin%3Fclient_name%3DQYWXClient"
                              role="button"
                            >
                              <img
                                src="/cas/images/new/WeChat.png"
                                alt=""
                                style="margin-top: 16px"
                              />
                            </a>
                          </div>
                        </div>
                      </form>

                      <form
                        id="loginForm_"
                        class="form-horizontal col-lg-9 col-md-9 col-sm-9 col-xs-9 phone_div hidden"
                        action="/cas/login;jsessionid=98B7CB8D1FB84AA783B6015B956F5D44-n1?service=http%3A%2F%2Fmy.yzu.edu.cn%2Fportal_main%2FtoPortalPage"
                        method="post"
                      >
                        <input
                          type="hidden"
                          name="lt"
                          value="LT-229275-35kSOVylDRokePde2ajGtzIN3uU9lN-https://uaaap.yzu.edu.cn/cas"
                        />

                        <input type="hidden" name="execution" value="e1s1" />

                        <input type="hidden" name="_eventId" value="submit" />

                        <div class="form-group">
                          <div class="add_action">
                            <input
                              id="username_"
                              name="username"
                              class="form-control"
                              tabindex="1"
                              placeholder="教职工号/学生学号"
                              class="form-control"
                              accesskey="n"
                              type="text"
                              value=""
                              size="25"
                              autocomplete="off"
                            />

                            <span
                              ><img
                                src="/cas/images/new/icon_account.png"
                                alt=""
                            /></span>

                            <p
                              class="getstunumbpc"
                              title="教职工为本人6位数字工号，学生为本人学号，新生点击？获取学号"
                              href="javascript:void(0);"
                              onclick="getsutnumber()"
                            >
                              ?
                            </p>
                          </div>
                        </div>

                        <div class="form-group">
                          <div class="add_action">
                            <input
                              id="cellPhoneNum"
                              name="cellPhoneNum"
                              class="form-control"
                              tabindex="4"
                              placeholder="请输入手机号"
                              class="form-control"
                              type="text"
                              value=""
                              size="25"
                              autocomplete="off"
                            />

                            <span
                              ><img
                                src="/cas/images/new/icon_account.png"
                                alt=""
                            /></span>

                            <span class="T-getCode">获取验证码</span>
                          </div>
                        </div>

                        <div class="form-group">
                          <div class="add_action">
                            <input
                              id="mobileAuthCode"
                              name="authCode"
                              class="form-control"
                              tabindex="3"
                              placeholder="验证码"
                              class="form-control"
                              type="text"
                              value=""
                              size="25"
                              autocomplete="off"
                            />

                            <span
                              ><img
                                src="/cas/images/icon _passdword.png"
                                alt=""
                            /></span>
                          </div>
                        </div>

                        <div class="form-group forget_div">
                          <div
                            class="col-md-6 text-right pull-right"
                            style="postion: relative; z-index: 999999"
                          >
                            <a
                              href="javascript:void(0);"
                              onclick="changeMobile()"
                              style="color: #666; margin-right: -15px"
                              ><span>更换手机号</span></a
                            >
                          </div>
                        </div>

                        <div class="form-group submitBtn">
                          <span id="_tipMsg_">
                            <h6>&nbsp;</h6>
                          </span>

                          <input
                            class="login_btn submit"
                            tabindex="4"
                            value="登录"
                            type="button"
                            onclick="CellPhoneSubmit()"
                          />
                        </div>

                        <div class="form-group qrcode_group wechat">
                          <span class="line">&nbsp;</span> 第三方登录
                          <span class="line">&nbsp;</span>

                          <div class="text-center">
                            <a
                              href="https://open.work.weixin.qq.com/wwopen/sso/qrConnect?appid=wwc576ff979f9e4e54&agentid=1000002&redirect_uri=http%3A%2F%2Fuaaap.yzu.edu.cn%2Fcas%2Flogin%3Fclient_name%3DQYWXClient"
                              role="button"
                            >
                              <img
                                src="/cas/images/new/WeChat.png"
                                alt=""
                                style="margin-top: 16px"
                              />
                            </a>
                          </div>
                        </div>
                      </form>
                    </div>

                    <div class="form_bg">&nbsp;</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row" style="height: 20px">
        <p class="text-center" style="margin-top: 20px; color: white">
          ©2015 扬州大学
          <a href="https://beian.miit.gov.cn" target="_blank"
            >苏ICP备12022580号-1</a
          >
        </p>
      </div>
    </div>

    <div class="container-fluid sj" id="sj">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <img src="/cas/images/phone_logo.png" alt="" class="phone_logo" />
        </div>

        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 phone_title">
          账号登录密码
        </div>

        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <form
            id="loginForm"
            class="form-horizontal zh_login"
            action="/cas/login;jsessionid=98B7CB8D1FB84AA783B6015B956F5D44-n1?service=http%3A%2F%2Fmy.yzu.edu.cn%2Fportal_main%2FtoPortalPage"
            method="post"
          >
            <input
              type="hidden"
              name="lt"
              value="LT-229275-35kSOVylDRokePde2ajGtzIN3uU9lN-https://uaaap.yzu.edu.cn/cas"
            />

            <input type="hidden" name="execution" value="e1s1" />

            <input type="hidden" name="_eventId" value="submit" />

            <input
              type="hidden"
              name="isQrSubmit"
              value="false"
              id="isQrSubmit"
            />

            <input type="hidden" name="qrValue" value="" id="qrValue" />

            <input
              type="hidden"
              name="isMobileLogin"
              value="false"
              id="isMobileLogin"
            />

            <div class="form-group">
              <input
                id="username"
                name="username"
                class="form-control"
                tabindex="1"
                onkeydown="javascript: if (event.keyCode==13) _systemLogin();"
                placeholder="教师工号/学生学号"
                accesskey="n"
                type="text"
                value=""
                size="25"
                autocomplete="off"
              />

              <p
                class="getstunumbphone"
                href="javascript:void(0);"
                onclick="getsutnumber()"
              >
                ?
              </p>
            </div>

            <div class="form-group">
              <input
                id="password"
                name="password"
                class="form-control"
                onkeydown="javascript: if (event.keyCode==13) _systemLogin();"
                placeholder="密码"
                type="password"
                value=""
                autocomplete="off"
              />
            </div>

            <div
              class="form-group"
              id="validatorCode_div"
              style="display: none"
            >
              <input
                id="authCode"
                name="authCode"
                class="form-control"
                tabindex="3"
                onkeydown="javascript: if (event.keyCode==13) _systemLogin();"
                placeholder="验证码"
                type="text"
                value=""
                size="25"
                autocomplete="off"
              />

              <span class="T-getPwdCode">
                <img
                  src=""
                  title="点击刷新验证码"
                  id="validatorCodeOfLogin"
                  onclick="changeValidatorCode();"
                />
              </span>
            </div>

            <div class="form-group">
              <label for="inputPassword3" class="col-sm-3 control-label">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              </label>

              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-left">
                <div id="tipMsg">
                  <h6></h6>
                </div>
              </div>
            </div>

            <div class="form-group">
              <a
                class="btn btn-primary btn-block"
                type="button"
                onclick="_systemLogin();"
              >
                登录
              </a>
            </div>

            <div class="form-group phone_code">
              <a class="btn btn-primary btn-block block_btn">
                短信验证码登录
              </a>
            </div>

            <div class="form-group phone_code">
              <a
                class="btn btn-success btn-block block_btn"
                style="color: #4cae4c"
                href="https://uaaap.yzu.edu.cn/mng/forgetPWD.jsp"
              >
                找回密码
              </a>
            </div>

            <div
              class="form-group phone_code"
              style="
                text-align: center;
                margin-bottom: 0px !important;
                padding-top: 3px;
              "
            >
              <span class="" style="color: red; text-align: center">
                <a
                  class="btn btn-success btn-block block_btn"
                  href="javascript:void(0);"
                  onclick="changeMobile()"
                  style="color: #3e79b6 !important; display: inline-block"
                  >修改手机号码</a
                >
              </span>
            </div>

            <div class="form-group phone_code" style="text-align: center">
              <br />

              <span class="" style="color: red; text-align: center"
                >温馨提示：

                <p
                  style="
                    color: red;
                    display: inline-block;
                    vertical-align: -20px;
                  "
                >
                  1.初次登录请通过短信验证码登录<br />

                  2.学号信息获取请点击“？”获取
                </p>
              </span>
            </div>

            <div class="form-group text-center"></div>
          </form>

          <form
            id="loginForm_"
            class="form-horizontal phone_login"
            action="/cas/login;jsessionid=98B7CB8D1FB84AA783B6015B956F5D44-n1?service=http%3A%2F%2Fmy.yzu.edu.cn%2Fportal_main%2FtoPortalPage"
            method="post"
          >
            <input
              type="hidden"
              name="lt"
              value="LT-229275-35kSOVylDRokePde2ajGtzIN3uU9lN-https://uaaap.yzu.edu.cn/cas"
            />

            <input type="hidden" name="execution" value="e1s1" />

            <input type="hidden" name="_eventId" value="submit" />

            <div class="form-group">
              <input
                id="username_"
                name="username"
                class="form-control"
                tabindex="1"
                placeholder="教师工号/学生学号"
                class="form-control"
                accesskey="n"
                type="text"
                value=""
                size="25"
                autocomplete="off"
              />

              <p
                class="getstunumbphone"
                href="javascript:void(0);"
                onclick="getsutnumber()"
              >
                ?
              </p>
            </div>

            <div class="form-group">
              <input
                id="cellPhoneNum"
                name="cellPhoneNum"
                class="form-control phoneNo"
                tabindex="4"
                placeholder="请输入手机号"
                class="form-control phoneNo"
                type="text"
                value=""
                size="25"
                autocomplete="off"
              />
            </div>

            <div class="form-group">
              <input
                type="text"
                placeholder="请输入短信验证码"
                id="mobileAuthCode"
                class="form-control"
                name="authCode"
              />

              <span class="T-getCode">获取验证码</span>
            </div>

            <div class="form-group">
              <a href="javascript:void(0);" onclick="changeMobile()"
                ><span style="float: right">更换手机号</span></a
              >
            </div>

            <div class="form-group">
              <span id="_tipMsg_"></span>

              <a class="btn btn-primary btn-block" onclick="CellPhoneSubmit()">
                登录
              </a>
            </div>

            <div class="form-group account_code">
              <a class="btn btn-primary btn-block block_btn"> 账号密码登录 </a>
            </div>

            <div class="form-group phone_code">
              <a
                class="btn btn-success btn-block block_btn"
                style="color: #4cae4c"
                href="https://uaaap.yzu.edu.cn/mng/forgetPWD.jsp"
              >
                找回密码
              </a>
            </div>

            <div class="form-group phone_code" style="text-align: center">
              <br />

              <span class="" style="color: red; text-align: center"
                >温馨提示：

                <p
                  style="
                    color: red;
                    display: inline-block;
                    vertical-align: -20px;
                  "
                >
                  1.初次登录请通过短信验证码登录<br />

                  2.学号信息获取请点击“？”获取
                </p>
              </span>
            </div>

            <div class="form-group text-center"></div>
          </form>
        </div>
      </div>
    </div>

    <!--[if !IE]> -->

    <script type="text/javascript">
      window.jQuery ||
        document.write(
          "<script src='assets/js/jquery.min.js' type='text/javascript' >" +
            "<" +
            "/script>"
        );
    </script>

    <!-- <![endif]-->

    <!--[if IE]>
      <script type="text/javascript">
        window.jQuery ||
          document.write(
            "<script src='assets/js/jquery1x.min.js' type='text/javascript' >" +
              "<" +
              "/script>"
          );

        document.write(
          "<script src='js/jquery-placeholder.js' type='text/javascript' >" +
            "<" +
            "/script>"
        );

        document.write(
          "<script src='js/modernizr-custom.js' type='text/javascript' >" +
            "<" +
            "/script>"
        );
      </script>
    <![endif]-->

    <script src="js/crypto-js/crypto-js.js" type="text/javascript"></script>

    <script src="js/jquery.json.min.js" type="text/javascript"></script>

    <script src="js/qrcode.min.js" type="text/javascript"></script>

    <script src="/cas/plugins/jquery/jquery-1.9.1.min.js"></script>

    <script type="text/javascript" charset="utf-8">
      var getMobileNum = function (isFocus) {
        $.ajax({
          url: "https://uaaap.yzu.edu.cn:443/cas/cellPhone",

          type: "get",

          dataType: "json",

          data: {
            reqType: "5",

            usreName: $("#username_").val(),
          },

          success: function (res) {
            showTipMsg_("");

            if (res.success) {
              if (res.mobile) {
                cellPhone_ = res.mobile;

                $("#cellPhoneNum").val(
                  cellPhone_.substr(0, 3) + "****" + cellPhone_.substr(7)
                );
              }
            } else {
              var code_ = res.code;

              if (code_ && (code_ == "12" || code_ == "13")) {
                showTipMsg_(res.msg);
              } else {
                if (code_ && "6" == code_) {
                  showTipMsg_("您输入的用户名不存在,请重新输入！");

                  if (isFocus) {
                    $("#username_").focus();
                  }

                  $("#cellPhoneNum").val("");

                  $("#cellPhoneNum").attr("placeholder", " ");

                  $("#cellPhoneNum").attr("readonly", "readonly");
                } else {
                  showTipMsg_(
                    "此账号未绑定手机号，请 <a class='error_phone' href='/cas/login?service=http://my.yzu.edu.cn/portal_main/toPortalPage&phoneBindPage='>绑定手机号>></a>"
                  );
                }
              }
            }

            sessionStorage.setItem("FIRSTLOGIN", res.FIRSTLOGIN);
          },

          error: function () {
            console.log("服务器内部错误");
          },
        });
      };

      var validatorCodeOfLogin = function () {
        document.getElementById("validatorCodeOfLogin").src = "";

        document.getElementById("validatorCodeOfLogin").src =
          "https://uaaap.yzu.edu.cn:443/cas/verCode?random=" +
          new Date().getTime();
      };

      var changeValidatorCode = function () {
        //换新的验证码

        validatorCodeOfLogin();
      };

      $(function () {
        if ($("#msg").length <= 0) {
          $("#tipMsg").html("<h6>&nbsp;</h6>");
        }

        //检验账号登录返回的错误信息-PC

        var error_msg = $("#loginForm span[id='tipMsg'] font").html();

        if (error_msg) {
          if (error_msg.indexOf("密码输入错误") != -1) {
            error_msg = error_msg.substring(0, error_msg.length - 1);

            error_msg +=
              ",还可以通过 <a href='javascript:;' class='phone error_phone'>短信验证码登录>><a/>";

            $("#loginForm span[id='tipMsg']").empty();

            $("#loginForm span[id='tipMsg']").append(
              "<h6><font color='red'>" + error_msg + "</font></h6>"
            );
          }

          if (error_msg.indexOf("密码错误") != -1) {
            error_msg +=
              "，还可以通过 <a href='javascript:;' class='phone error_phone'>短信验证码登录>><a/>";

            $("#loginForm span[id='tipMsg']").empty();

            $("#loginForm span[id='tipMsg']").append(
              "<h6><font color='red'>" + error_msg + "</font></h6>"
            );
          }
        }

        //检验账号登录返回的错误信息-H5

        var error_msg = $("#loginForm div[id='tipMsg'] font").html();

        if (error_msg) {
          if (error_msg.indexOf("密码输入错误") != -1) {
            error_msg = error_msg.substring(0, error_msg.length - 1);

            error_msg +=
              ",还可以通过 <a href='javascript:;' class='phone_code error_phone'>短信验证码登录>><a/>";

            $("#loginForm div[id='tipMsg']").empty();

            $("#loginForm div[id='tipMsg']").append(
              "<h6><font color='red'>" + error_msg + "</font></h6>"
            );
          }

          if (error_msg.indexOf("密码错误") != -1) {
            error_msg +=
              "，还可以通过 <a href='javascript:;' class='phone_code error_phone'>短信验证码登录>><a/>";

            $("#loginForm div[id='tipMsg']").empty();

            $("#loginForm div[id='tipMsg']").append(
              "<h6><font color='red'>" + error_msg + "</font></h6>"
            );
          }
        }

        if (error_msg) {
        }

        $(".account").on("click", function () {
          $(".phone_div").addClass("hidden");

          $(".account_div").removeClass("hidden");

          $(this).addClass("login_active");

          $(this).siblings().removeClass("login_active");
        });

        $(".phone").on("click", function () {
          $(".phone_div").removeClass("hidden");

          $(".account_div").addClass("hidden");

          $(this).addClass("login_active");

          $(this).siblings().removeClass("login_active");
        });

        $(".content_title").on("click", function () {
          var number = Number($(this).index()) + 1;

          $(this).addClass("active");

          $(this).siblings().removeClass("active");

          $(".content-" + number).removeClass("hide");

          $(".content-" + number)
            .siblings()
            .addClass("hide");
        });

        $(".phone_code").on("click", function () {
          $(".zh_login").hide();

          $(".phone_login").show();

          $(".phone_title").text("手机验证码登录");
        });

        $(".account_code").on("click", function () {
          $(".zh_login").show();

          $(".phone_login").hide();

          $(".phone_title").text("账号登录密码");
        });

        $(".phoneNo").keyup(function () {
          if ($(this).val().length != 0) {
            $(".T-getCode").css("color", "#3e79b6");
          } else {
            $(".T-getCode").css("color", "#ccc");
          }
        });
      });
    </script>

    <script type="text/javascript" charset="utf-8">
      var cellPhone_ = null;

      var _systemLogin = function () {
        if ($("#username").val() == null || $("#username").val() == "") {
          $("#tipMsg").empty();

          $("#tipMsg").append(
            "<h6><font color='red'>用户名不能为空</font></h6>"
          );

          return;
        }

        if ($("#password").val() == null || $("#password").val() == "") {
          $("#tipMsg").empty();

          $("#tipMsg").append("<h6><font color='red'>密码不能为空</font></h6>");

          return;
        }

        if (
          false &&
          ($("#authCode").val() == null || $("#authCode").val() == "")
        ) {
          $("#tipMsg").empty();

          $("#tipMsg").append(
            "<h6><font color='red'>验证码不能为空</font></h6>"
          );

          return;
        }

        /*var keyHex = CryptoJS.enc.Utf8.parse('LT-229275-35kSOVylDRokePde2ajGtzIN3uU9lN-https://uaaap.yzu.edu.cn/cas');

        var encrypted = CryptoJS.DES.encrypt($("#password").val(), keyHex, {

            mode: CryptoJS.mode.ECB,

            padding: CryptoJS.pad.Pkcs7

        });



        $("#password").val(encrypted);*/

        sessionStorage.setItem("usreName", $("#username").val());

        $("#loginForm").submit();
      };

      var showTipMsg_ = function (msg) {
        $("#yzmDiv").css("margin-bottom", "2px");

        $("#_tipMsg_").empty();

        if (msg == "") {
          $("#_tipMsg_").append("<h6>&nbsp;</h6>");
        } else {
          $("#_tipMsg_").append(
            "<h6 style='text-align: center;'><font color='red'>" +
              msg +
              "</font></h6>"
          );
        }
      };

      var CellPhoneSubmit = function () {
        if ($("#username_").val() == null || $("#username_").val() == "") {
          showTipMsg_("用户名不能为空");

          return;
        }

        if (
          $("#cellPhoneNum").val() == null ||
          $("#cellPhoneNum").val() == ""
        ) {
          showTipMsg_("手机号不能为空");

          return;
        }

        if (
          $("#mobileAuthCode").val() == null ||
          $("#mobileAuthCode").val() == ""
        ) {
          showTipMsg_("请输入验证码");

          return null;
        }

        //从cookie中获取验证码，如果获取不到说明过期了

        //后台验证 验证码  by zjr

        $.ajax({
          url: "https://uaaap.yzu.edu.cn:443/cas/cellPhone",

          type: "get",

          dataType: "json",

          data: {
            reqType: "8",

            inputCode: $("#mobileAuthCode").val(),
          },

          success: function (res) {
            if (res.success) {
              $("#loginForm_").submit();
            } else if (res.code && res.code == 5) {
              showTipMsg_(showStr);
            } else {
              showTipMsg_(res.msg);
            }
          },

          error: function () {
            showTipMsg_("验证码校验失败");
          },
        });
      };

      function setCookie(cname, cvalue, m) {
        var d = new Date();

        d.setTime(d.getTime() + m * 60 * 60 * 1000);

        var expires = "expires=" + d.toUTCString();

        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
      }

      function getCookie(cname) {
        var name = cname + "=";

        var decodedCookie = decodeURIComponent(document.cookie);

        var ca = decodedCookie.split(";");

        for (var i = 0; i < ca.length; i++) {
          var c = ca[i];

          while (c.charAt(0) == " ") {
            c = c.substring(1);
          }

          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }

        return "";
      }

      function delete_cookie(name) {
        document.cookie =
          name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      }

      /**

     * 跳转到更换手机号页面

     */

      var changeMobile = function () {
        //绑定页面

        var orginalUrl = $("#loginForm_").attr("action");

        sessionStorage.setItem("usreName", $("#username_").val());

        sessionStorage.setItem("cellPhoneNum", $("#cellPhoneNum").val());

        sessionStorage.setItem("orginalUrl", orginalUrl);

        var url_ = null;

        if (orginalUrl.lastIndexOf("?") != -1) {
          url_ = orginalUrl + "&phoneChangePage=";
        } else {
          url_ = orginalUrl + "?phoneChangePage=";
        }

        window.location.href = url_;
      };

      /**

     * 跳转到获取学号页面

     */

      var getsutnumber = function () {
        window.location.href = "http://my.yzu.edu.cn/xh/getXH";
      };

      $(function () {
        // var browser={

        // 		versions:function(){

        // 					   var u = navigator.userAgent, app = navigator.appVersion;

        // 					   return {//移动终端浏览器版本信息

        // 							trident: u.indexOf('Trident') > -1, //IE内核

        // 							presto: u.indexOf('Presto') > -1, //opera内核

        // 							webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核

        // 							gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核

        // 							mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端

        // 							ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端

        // 							android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器

        // 							iPhone: u.indexOf('iPhone') > -1 , //是否为iPhone或者QQHD浏览器

        // 							iPad: u.indexOf('iPad') > -1, //是否iPad

        // 							webApp: u.indexOf('Safari') == -1, //是否web应该程序，没有头部与底部

        // 							weixin: u.indexOf('MicroMessenger') > -1, //是否微信

        // 							qq: u.match(/\sQQ/i) == " qq" //是否QQ

        // 						};

        // 					}(),

        // 				language:(navigator.browserLanguage || navigator.language).toLowerCase()

        // 			}

        //

        //

        // if(browser.versions.mobile || browser.versions.ios || browser.versions.android || browser.versions.iPhone || browser.versions.iPad){

        // 		$("#pc").remove();

        // }else{

        // 		$("#sj").remove();

        // }

        if ($(window).width() > 1024) {
          $("#sj").remove();
        } else {
          $("#pc").remove();
        }

        if (false) {
          $("#validatorCode_div").css("display", "block");

          validatorCodeOfLogin();
        }

        if ("" != "") {
          getMobileNum(false);
        }

        //获取短信验证码

        var validCode = true;

        $(".T-getCode").click(function () {
          if ($(".T-getCode").data("notdo")) {
            return;
          }

          if ($("#username_").val() == null || $("#username_").val() == "") {
            showTipMsg_("用户名不能为空");

            return;
          }

          if (
            $("#cellPhoneNum").val() == null ||
            $("#cellPhoneNum").val() == ""
          ) {
            showTipMsg_("手机号不能为空");

            return;
          }

          //验证短信号码合法性

          var _cellPhone_ = null; //提交到服务器的值

          if (!cellPhone_) {
            var myreg = /^[1][3,4,5,7,8,9][0-9]{9}$/;

            if (!myreg.test($("#cellPhoneNum").val())) {
              showTipMsg_("您输入的手机号码不合法，请重新输入。");

              return;
            }

            _cellPhone_ = $("#cellPhoneNum").val();
          }

          if (
            $("#cellPhoneNum").val() &&
            $("#cellPhoneNum").val().indexOf("***") == -1
          ) {
            _cellPhone_ = $("#cellPhoneNum").val();
          }

          if (_cellPhone_) {
            cellPhone_ = _cellPhone_;
          }

          $("#_tipMsg_").empty();

          $("#_tipMsg_").append("<h6>&nbsp;</h6>");

          $("#yzmDiv").css("margin-bottom", "20px");

          $.ajax({
            url: "https://uaaap.yzu.edu.cn:443/cas/cellPhone",

            type: "get",

            dataType: "json",

            data: {
              reqType: "1",

              usreName: $("#username_").val(),

              cellPhoneNumber: cellPhone_,
            },

            beforeSend: function () {
              $(".T-getCode").data("notdo", true);
            },

            success: function (res) {
              if (res.success) {
                showTipMsg_("验证码已发送到您的手机，请注意查收");

                //setCookie("cellPhoneNumValidateCode", res.cellphoneValidateCode, 10);

                var time = 60;

                var $code = $(".T-getCode");

                if (validCode) {
                  validCode = false;

                  var t = setInterval(function () {
                    time--;

                    $code.html(time + "秒");

                    if (time == 0) {
                      $(".T-getCode").data("notdo", false);

                      clearInterval(t);

                      $code.html("重新获取");

                      validCode = true;

                      $("#_tipMsg_").empty();

                      $("#_tipMsg_").append("<h6>&nbsp;</h6>");

                      $("#yzmDiv").css("margin-bottom", "20px");
                    }
                  }, 1000);
                } else {
                  $(".T-getCode").data("notdo", false);
                }
              } else if (res.code && res.code == 5) {
                $(".T-getCode").data("notdo", false);

                //绑定页面

                var orginalUrl = $("#loginForm_").attr("action");

                sessionStorage.setItem("orginalUrl", orginalUrl);

                sessionStorage.setItem("usreName", $("#username_").val());

                sessionStorage.setItem(
                  "cellPhoneNum",
                  $("#cellPhoneNum").val()
                );

                if (res.isTeacher) {
                  sessionStorage.setItem("isTeacher", res.isTeacher);
                }

                var url_ = null;

                if (orginalUrl.lastIndexOf("?") != -1) {
                  url_ = orginalUrl + "&phoneBindPage=";
                } else {
                  url_ = orginalUrl + "?phoneBindPage=";
                }

                var showStr =
                  res.msg +
                  ", <a href='" +
                  url_ +
                  "'>请点击此处进入绑定页面</a>";

                showTipMsg_(showStr);
              } else {
                $(".T-getCode").data("notdo", false);

                showTipMsg_(res.msg);
              }
            },

            error: function () {
              $(".T-getCode").data("notdo", false);

              showTipMsg_("获取验证码错误，请稍后再试。");
            },
          });
        });

        //输入完工号，查询是否存在短信号码

        $("#cellPhoneNum").attr("readonly", true);

        $("#username_").on("blur", function () {
          getMobileNum(true);
        });
      });
    </script>
  </body>
</html>
